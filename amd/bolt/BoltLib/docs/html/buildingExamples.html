<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Bolt Preview: Building Bolt Example Programs</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Bolt Preview
   &#160;<span id="projectnumber">0.4.4</span>
   </div>
   <div id="projectbrief">C++ template library with support for OpenCL</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Building Bolt Example Programs </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#CMake">Bolt dynamically generated native build infrastructure</a><ul><li class="level2"><a href="#overview">CMake Overview</a></li>
<li class="level2"><a href="#clDependencies">OpenCL&tm; Dependencies</a></li>
</ul>
</li>
<li class="level1"><a href="#config">CMake Bolt Configuration</a><ul><li class="level2"><a href="#startup">Startup projects</a></li>
<li class="level2"><a href="#compDependency">Supported compilers</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="CMake"></a>
Bolt dynamically generated native build infrastructure</h1>
<h2><a class="anchor" id="overview"></a>
CMake Overview</h2>
<p>Bolt does not provide Microsoft Visual Studio project files, makefiles, or any other native build infrastructure for its examples. Instead, the examples directory contains a file named CMakeLists.txt. Bolt uses CMake as a 'master' build system, and native build files, such as Visual Studio projects, nmake makefiles, UNIX makefiles, or Mac xcode projects are GENERATED with CMake. CMake is very similar to the autoconf tool 'configure', except that it is cross-platform. <br/>
<em><b>NOTE:</b> With CMAKE the native OS build files are GENERATED, so changes made to the native build files are overwritten the next time cmake runs.</em></p>
<p>CMake is freely available for download on the web from:<br/>
 <a href="http://www.cmake.org/" class="external">http://www.cmake.org/</a></p>
<h2><a class="anchor" id="clDependencies"></a>
OpenCLâ„¢ Dependencies</h2>
<p>Bolt's OpenCL&trade; projects have a dependency on the AMD APP SDK and the AMD OpenCL runtime provided by the Catalyst drivers. While OpenCL is regarded as a cross-platform, vendor-neutral API, AMD is using C++ kernel template features found in the AMD OpenCL implementation that to date are not found in other vendor implementations. During its configuration, Cmake requires an environment variable to find the root of the OpenCL installation. Provide this by defining the environment variable <b>AMDAPPSDKROOT</b> with the path to the root of the OpenCL SDK, typically <code>'C:/Program Files (x86)/AMD APP'</code> on Windows 64-bit machines. This environment variable is automatically defined by the catalyst installer; so, in most circumstances, no additional work is needed. A more vendor-neutral environment variable is <b>OPENCL_ROOT</b>, but it is not defined by the catalyst installer. </p>
<div class="image">
<img src="opencl_environment_variable.png" alt="opencl_environment_variable.png"/>
<div class="caption">
Environment variable setup screen</div></div>
<p> Cmake ships with several interfaces to help a developer generate native build files. For Windows-based systems, CMake has a GUI interface called CMake-gui that incorporates the traditional point-and-click conventions of buttons, list boxes, and search boxes. For CLI-based sytems (including CMD from windows), cmake has a native command-line executable (the GUI is just a wrapper around the command line). The command line executable is useful, even in Windows, for scripting purposes, such as might be used with automated and continuous build systems.</p>
<h1><a class="anchor" id="config"></a>
CMake Bolt Configuration</h1>
<p>Once installed, the easiest interface for Windows or X-windows is the cmake GUI program 'cmake-gui'. The terminal applications cmake.exe and ccmake.exe (based on curses library) are easy to learn. Cmake automates the creation of build environments in a cross-platform manner, generating native build files for each respective platform. When launched, it inspects the host computer and searches for all tools, SDKs, libraries, and code necessary to build the project. Once cmake-gui is launched, a configuration window appears with two text boxes on the top. </p>
<div class="image">
<img src="cmake.blank.png" alt="cmake.blank.png"/>
<div class="caption">
Initial cmake-gui screen</div></div>
<p> For this example, Bolt has been installed from from a .zip file on the local machine at <code>C:/code/bolt</code>. In this document, it is called <b>BOLT_ROOT</b>. Either click the 'browse source...' button, and navigate to the <b>BOLT_ROOT/examples</b> directory, or manually type the path into the textbox. Note that the path in the 'source code' text box contains the root-level CMakeLists.txt file for the example projects. The directory we type select for, <code>'Where to build the binaries:'</code>, can go anywhere on the hard drive, but should NOT be in a directory that contains source code. This makes it easy to cleanly rebuild projects by deleting the binaries directory. Each target generator (picure below) must have its own binaries directory: do not mix Visual Studio 2010 binaries with Visual Studio 2012 binaries. The advantage of out-of-source builds are numerous, and are documented in <a href="http://www.cmake.org/Wiki/CMake_FAQ#Out-of-source_build_trees" class="external">CMAKE FAQ</a>. For example, for a debug configuration with an NMake generator, a directory such as <b>BOLT_ROOT/examples</b>/bin/nMakeDebug can exist. All generated build files and all the binary intermediate object files are built in this path. Generated files are kept seperat from source files in a similar concept to what Autotools does for Linux with configure scripts. After setting the build directory, click the 'Generate' button near the bottom of the main window. A new window appears to prompt what type of generator to use. </p>
<div class="image">
<img src="cmake.pick.generator.png" alt="cmake.pick.generator.png"/>
<div class="caption">
List of cmake generators</div></div>
<p> In the example above, 'Visual Studio 11 Win64' generator is selected. The selected build directory should be descriptive of the generator used; otherwise, it is easy to start over (delete the binaries directory). After selecting the generator, cmake examines the system, finding all project dependencies and properties, which appear red in the properties box. </p>
<div class="image">
<img src="cmake.first.configure.png" alt="cmake.first.configure.png"/>
<div class="caption">
Cmake system introspection</div></div>
<p> While cmake finishes configuring the projects, it prints messages in the output log visible in the bottom textbox within the GUI; this states that cmake found the OpenCL and Bolt libraries. If not, cmake prints in red text which libraries or header files are missing. This usually means the environment variables that cmake uses to find dependencies are not set up properly (see <a class="el" href="buildingExamples.html#clDependencies">OpenCL&trade; Dependencies</a> ).</p>
<h2><a class="anchor" id="startup"></a>
Startup projects</h2>
<p>After a successful configuration pass, the directory specified initially in the <code>'Where to build the binaries:'</code> textbox contains an 'Examples.sln' file, which can be opened in the appropriate version of Visual Studio. At this point, selecting the 'Build Solution' menu item builds all the samples.is selected. By default, Visual Studio will have the 'ALL_BUILD' project selected as the <code>'Startup'</code> project. If a particular sample must be run under a debugger, mark it <code>'Startup'</code> by first right-clicking on the project, then selecting <code>'Set as Startup Project'</code>. Debugging then proceeds normally.</p>
<h2><a class="anchor" id="compDependency"></a>
Supported compilers</h2>
<p>Bolt currently uses type traits introduced in Visual Studio 2010. We hope to include additional compilers at some time. We also hope to add GCC/MinGW support at some time. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Dec 14 2012 14:12:49 for Bolt Preview by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.1.1
</small></address>
</body>
</html>
